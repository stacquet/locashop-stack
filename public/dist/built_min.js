angular.module("locashopApp",["uiGmapgoogle-maps","llNotifier","cgBusy","ngRoute","appRoutes"]),angular.module("appRoutes",[]).config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"app/home/home.html"}).when("/inscription",{templateUrl:"app/inscription/inscription.html",controller:"inscriptionController as vm"}).when("/login",{templateUrl:"app/home/login.html"}),b.html5Mode(!0)}]),function(){"use strict";function a(a,b,c,d){function e(){h.busy=d.login(h.user.email,h.user.password).success(function(c){a.userInfos=c.user,a.isLoggedIn=!0,b.path("/")}).error(function(a){console.log(a),h.messages=a.messages})}function f(){a.isLoggedIn||(h.busy=d.userInfos().success(function(b){a.userInfos=b,a.isLoggedIn=!0}))}function g(){h.busy=d.logout().success(function(){a.userInfos=null,a.isLoggedIn=!1,b.path("/")})}var h=this;h.login=e,h.logout=g,f()}angular.module("locashopApp").controller("homeController",a),a.$inject=["$rootScope","$location","notifier","homeService"]}(),function(){"use strict";function a(a){function b(){return a.get("/api/auth/userInfos")}function c(){return a.get("/api/auth/logout")}function d(b,c){return a.post("/api/auth/login",{email:b,password:c})}var e={userInfos:b,logout:c,login:d};return e}angular.module("locashopApp").factory("homeService",a),a.$inject=["$http"]}(),function(){"use strict";function a(a,b,c,d){function e(){h.user.password!==h.user.passwordBis?(h.passwordEquals=!1,c.notify("password différents")):h.passwordEquals=!0}function f(){h.busy=d.checkEmailAvailable(h.user.email).then(function(a){h.emailAvailable=a.data.checkEmailAvailable},function(){})}function g(){h.loadingMessage="Inscription en base",h.localSignup.promise=d.localSignup(h.user).then(function(){return h.loadingMessage="Envoi d'un email de vérification",d.emailVerification()}).then(function(){c.notify({template:"Nous vous avons envoyez un mail pour confirmer votre inscription"})},function(){c.notify({template:"Nous n'avons pu vous envoyer un mail, veuillez contactez le support",type:"error"})})}var h=this;h.passwordEquals=!0,h.emailAvailable=!0,h.loadingMessage="loading",h.checkPasswordEqual=e,h.checkEmailAvailable=f,h.localSignup=g}angular.module("locashopApp").controller("inscriptionController",a),a.$inject=["$rootScope","$location","notifier","inscriptionService"]}(),function(){"use strict";function a(a){function b(b){return a.post("/api/inscription/checkEmailAvailable",{email:b}).success(function(a){return console.log(a),a}).error(function(){})}function c(b){return a.post("/api/auth/localSignup",b)}function d(){return a.get("/api/auth/emailVerification")}var e={checkEmailAvailable:b,localSignup:c,emailVerification:d};return e}angular.module("locashopApp").factory("inscriptionService",a),a.$inject=["$http"]}();